#include <REGX52.H>
#include "Delay.h"
#include "MatrixLED.h"

// code keywork : 将动画数组存放到存放到flash中的代码段，默认数据存放置RAM中的数据段
// RAM(512Bytes) : 数据段存储器，存放全局变量，静态变量，存储空间小，初始化后可以修改，可读可写
// flash(8K) : 代码段存储器，存放指令代码，存储空间大，初始化后不可以修改，只读
unsigned char code Animation_1[] = {
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xFF,0x08,0x08,0x08,0xFF,0x00,0x0E,0x15,0x15,0x15,0x0C,0x00,0xFE,0x01,0x02,0x00,
0xFE,0x01,0x02,0x00,0x0E,0x11,0x11,0x11,0x0E,0x00,0xFD,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};

unsigned char code Animation_2[] = {
0x3C,0x42,0xA9,0x85,0x85,0xA9,0x42,0x3C,
0x3C,0x42,0xA5,0x85,0x85,0xA5,0x42,0x3C,
0x3C,0x42,0xA5,0x89,0x89,0xA5,0x42,0x3C,
};

void main() {
	unsigned char i = 0, offset = 0, count = 0;
	MatrixLED_Init();
	while (1) {
		for (i = 0; i < 8; ++i) {
			MatrixLED_ShowColumn(i, Animation_2[i + offset]);	
		}
		++count;
		if (count > 10) { // 扫描十遍，利用视觉他停留
			count = 0;
			offset += 8; // 流动字幕偏移为1，逐帧动画偏移为8
			if (offset > 16) { // 显示最后的图像
				offset = 0;
			}
		}
	}
}